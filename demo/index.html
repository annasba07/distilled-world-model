<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lightweight World Model ‚Ä¢ Demo</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <span class="logo">üåé</span>
        <span class="title">Lightweight World Model</span>
      </div>
      <div class="status">
        <div class="health">
          <span class="dot" id="healthDot"></span>
          <span id="healthText">Checking server‚Ä¶</span>
        </div>
        <button class="btn btn-ghost" id="themeToggle" aria-label="Toggle theme">üåì</button>
      </div>
    </header>

    <main class="layout">
      <section class="stage">
        <div class="canvas-wrap">
          <canvas id="frameCanvas" width="512" height="512" aria-label="World view"></canvas>
          <div class="overlay hidden" id="overlay">
            <div class="spinner"></div>
          </div>
        </div>
        <div class="timeline" id="timeline" aria-label="Frame history"></div>
      </section>

      <aside class="sidebar">
        <div class="card">
          <div class="label">Models</div>
          <div class="row">
            <select id="modelsSelect" class="input"></select>
            <button id="btnLoadModel" class="btn">Load</button>
          </div>
          <div class="row space" style="margin-top:8px">
            <div class="muted">Current</div>
            <div class="mono" id="currentModel">‚Äî</div>
          </div>
        </div>

        <div class="card">
          <label for="prompt" class="label">Prompt</label>
          <div class="row">
            <input id="prompt" class="input" placeholder="e.g., 2D platformer with grass and clouds" />
          </div>
          <div class="row" style="margin-top:8px">
            <input id="seed" class="input" placeholder="Seed (optional)" />
          </div>
          <div class="row gap">
            <button id="btnGenerate" class="btn btn-primary">Generate</button>
            <button id="btnReset" class="btn">Reset</button>
            <button id="btnDownload" class="btn">Download</button>
            <button id="btnRecord" class="btn">Record</button>
          </div>
        </div>

        <div class="card">
          <div class="label">Sample Prompts</div>
          <div class="tags" id="samplePrompts"></div>
        </div>

        <div class="card">
          <div class="stats">
            <div class="stat">
              <div class="stat-label">FPS</div>
              <div class="stat-value" id="fpsValue">-</div>
            </div>
            <div class="stat">
              <div class="stat-label">Inference</div>
              <div class="stat-value" id="latencyValue">-</div>
            </div>
            <div class="stat">
              <div class="stat-label">Frames</div>
              <div class="stat-value" id="framesValue">-</div>
            </div>
          </div>
          <canvas id="fpsSpark" class="sparkline" width="240" height="48" aria-label="FPS trend"></canvas>
        </div>

        <div class="card">
          <div class="row space">
            <div>
              <div class="muted">Session</div>
              <div class="mono" id="sessionId">‚Äî</div>
            </div>
            <button id="btnCopy" class="btn btn-ghost">Copy</button>
          </div>
        </div>

        <div class="card">
          <div class="label">Snapshot & Replay</div>
          <div class="row gap">
            <button id="btnExportSnapshot" class="btn">Export</button>
            <label class="btn" for="fileImportSnapshot">Import</label>
            <input id="fileImportSnapshot" type="file" accept="application/json" style="display:none" />
            <button id="btnStopReplay" class="btn">Stop Replay</button>
          </div>
        </div>

        <div class="card">
          <div class="label">Settings</div>
          <div class="row" style="margin-bottom:8px">
            <select id="settingResolution" class="input">
              <option value="256">256√ó256</option>
              <option value="128">128√ó128</option>
            </select>
          </div>
          <div class="row" style="margin-bottom:8px">
            <input id="settingFps" class="input" type="number" placeholder="FPS target (optional)" />
          </div>
          <div class="row">
            <label><input type="checkbox" id="settingOverlay" checked /> Show overlay</label>
          </div>
        </div>

        <div class="card">
          <div class="label">Controls</div>
          <div class="kbd-help">
            <div class="keys-row">
              <div class="key" data-key="w">W</div>
            </div>
            <div class="keys-row">
              <div class="key" data-key="a">A</div>
              <div class="key" data-key="s">S</div>
              <div class="key" data-key="d">D</div>
            </div>
            <div class="keys-row">
              <div class="key" data-key=" ">Space</div>
            </div>
          </div>
          <div class="dpad" aria-label="On-screen controls">
            <button class="dpad-btn" data-action="up">‚ñ≤</button>
            <div class="row-center">
              <button class="dpad-btn" data-action="left">‚óÄ</button>
              <button class="dpad-btn" data-action="action">‚óè</button>
              <button class="dpad-btn" data-action="right">‚ñ∂</button>
            </div>
            <button class="dpad-btn" data-action="down">‚ñº</button>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <div class="toast hidden" id="toast" role="status" aria-live="polite"></div>

  <script src="./app.js"></script>
</body>
</html>

